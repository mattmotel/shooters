<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shooters</title>
  <style>
    .chosen {
      border: 1px solid blue;
    }
    .fade-out {
      opacity: 0;
      transition: opacity 2s ease-in;
    }
  </style>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-8">

  <div id="flashMessage" class="text-center text-2xl mb-4 h-10">
    <!-- Flash message will appear here -->
  </div>

  <div id="choiceContainer" class="grid lg:grid-cols-2 gap-8 max-w-xl mx-auto text-xl">
    <!-- Choices will be populated here -->
  </div>

  <div id="chosenAnswers" class="max-w-md mx-auto text-xs pt-16">
    <!-- Chosen answers will be displayed here -->
  </div>

  <script>
    // Fetch the JSON file
    fetch('choices.json')
      .then(response => response.json())
      .then(data => {
        // Function to get a random element from an array
        const getRandomElement = (arr) => {
          return arr[Math.floor(Math.random() * arr.length)];
        };

        // Function to display a random message and number
        const displayFlashMessage = () => {
          const flashMessage = document.getElementById('flashMessage');
          const randomMessage = Math.random() < 0.5 ? "CORRECT" : "WRONG";
          const textColor = randomMessage === "CORRECT" ? "text-green-600" : "text-red-600";
          const randomNumber = Math.floor(Math.random() * 101);
          flashMessage.innerHTML = `<span class="${textColor}">${randomMessage}</span> - ${randomNumber} Doves`;
          flashMessage.classList.remove('fade-out');
          setTimeout(() => flashMessage.classList.add('fade-out'), 50);
        };

        // Function to load a random choice
        const loadChoice = () => {
          const randomChoice = getRandomElement(data);
          const choiceContainer = document.getElementById('choiceContainer');
          choiceContainer.innerHTML = `
            <div class="hover:bg-gray-100 shadow-lg rounded-lg bg-white p-8 cursor-pointer items-center flex h-48" onclick="selectChoice('${randomChoice.choice1}', '${randomChoice.choice2}')">${randomChoice.choice1}</div>
            <div class="hover:bg-gray-100 shadow-lg rounded-lg bg-white p-8 cursor-pointer items-center flex h-48" onclick="selectChoice('${randomChoice.choice2}', '${randomChoice.choice1}')">${randomChoice.choice2}</div>
          `;
        };

        // Function to select a choice
        window.selectChoice = (chosen, notChosen) => {
          const chosenAnswers = document.getElementById('chosenAnswers');

          // Display flash message and number
          displayFlashMessage();

          // Create elements for both choices
          const choiceChosen = document.createElement('div');
          const choiceNotChosen = document.createElement('div');

          // Set their innerHTML
          choiceChosen.innerHTML = chosen;
          choiceNotChosen.innerHTML = notChosen;

          // Add 'chosen' class to the chosen choice
          choiceChosen.className = 'chosen p-2 bg-gray-50';
          choiceNotChosen.className = 'p-2 bg-gray-50 mb-4';

          // Append both to the chosenAnswers div
          chosenAnswers.insertBefore(choiceNotChosen, chosenAnswers.firstChild);
          chosenAnswers.insertBefore(choiceChosen, chosenAnswers.firstChild);

          // Load the next choice
          loadChoice();
        };

        // Load the initial choice
        loadChoice();
      });
  </script>

</body>
</html>
